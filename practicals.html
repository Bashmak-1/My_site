<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–æ–±–æ—Ç–∏</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" />
  <link id="theme-style" rel="stylesheet" href="" />
</head>
<body>

  <header>
    <div class="container header-container">
      <div class="logo">–ë–∞—Ä–∞–±–∞—à –í–æ–ª–æ–¥–∏–º–∏—Ä</div>
      
      <nav id="nav-menu">
        <ul>
          <li><a href="index.html">–ì–æ–ª–æ–≤–Ω–∞</a></li>
          <li><a href="#about">–ü—Ä–æ –º–µ–Ω–µ</a></li>
          <li><a href="labs.html">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ñ</a></li>
          <li><a href="practicals.html" class="active">–ü—Ä–∞–∫—Ç–∏—á–Ω—ñ</a></li>
        </ul>
      </nav>

      <div class="header-controls">
        <button id="theme-toggle" class="theme-btn" aria-label="Toggle Theme">üåô</button>
        <div class="burger-menu" id="burger-menu">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="labs-section">
      <div class="section-header">
        <h1>–í—Å—ñ –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ —Ä–æ–±–æ—Ç–∏</h1>
      </div>
      
      <div id="status">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –∑ GitHub...</div>
      
      <div class="cards-grid" id="list"></div>
    </section>
  </main>

  <footer>
    <p>¬© 2025 –ë–∞—Ä–∞–±–∞—à –í–æ–ª–æ–¥–∏–º–∏—Ä | <a href="https://github.com/Bashmak-1">GitHub</a></p>
  </footer>

  <script>
    // –¢–µ–º–∞ —Ç–∞ –ú–µ–Ω—é
    const toggleBtn = document.getElementById('theme-toggle');
    const themeLink = document.getElementById('theme-style');
    const darkThemePath = 'css/black_style.css';

    if (localStorage.getItem('theme') === 'dark') {
      themeLink.href = darkThemePath;
      toggleBtn.innerText = '‚òÄÔ∏è';
    } else {
      toggleBtn.innerText = 'üåô';
    }

    toggleBtn.addEventListener('click', () => {
      if (themeLink.getAttribute('href') !== darkThemePath) {
        themeLink.href = darkThemePath;
        toggleBtn.innerText = '‚òÄÔ∏è';
        localStorage.setItem('theme', 'dark');
      } else {
        themeLink.href = '';
        toggleBtn.innerText = 'üåô';
        localStorage.setItem('theme', 'light');
      }
    });

    const burgerBtn = document.getElementById('burger-menu');
    const navMenu = document.getElementById('nav-menu');

    burgerBtn.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      burgerBtn.classList.toggle('active');
    });
  </script>

  <script>
    const OWNER = "Bashmak-1";
    const REPO = "My_site";
    const FOLDER = "practical"; // –í–ê–ñ–õ–ò–í–û: –ø–∞–ø–∫–∞ practical
    const API_URL = `https://api.github.com/repos/${OWNER}/${REPO}/contents/${FOLDER}`;

    const statusEl = document.getElementById("status");
    const listEl = document.getElementById("list");

    async function fetchFiles() {
      try {
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error(`${res.status} ${res.statusText}`);
        const items = await res.json();
        
        const files = (items || [])
          .filter(i => i.type === "file" && i.name.toLowerCase().endsWith(".html"))
          .sort((a, b) => a.name.localeCompare(b.name, undefined, { numeric: true }));

        if (files.length === 0) {
          statusEl.textContent = "–§–∞–π–ª—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.";
          return;
        }

        statusEl.style.display = 'none';

        for (const file of files) {
          // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Ç–æ–π —Å–∞–º–∏–π —Å—Ç–∏–ª—å –∫–∞—Ä—Ç–æ–∫
          const card = document.createElement("div");
          card.className = "card";

          const relHref = `${FOLDER}/${encodeURIComponent(file.name)}`;
          
          const h3 = document.createElement("h3");
          h3.textContent = file.name;

          const p = document.createElement("p");
          p.textContent = "–ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ HTML/CSS"; // –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ —Ç–µ–∫—Å—Ç
          p.style.fontSize = "0.9rem";
          p.style.color = "#888";

          const a = document.createElement("a");
          a.href = relHref;
          a.className = "card-link";
          a.title = file.name;

          try {
            const r = await fetch(relHref);
            if (r.ok) {
              const text = await r.text();
              const t = extractTitle(text) || extractH1(text);
              if (t) h3.textContent = t;
            } else if (file.download_url) {
              const r2 = await fetch(file.download_url);
              if (r2.ok) {
                const text2 = await r2.text();
                const t2 = extractTitle(text2) || extractH1(text2);
                if (t2) h3.textContent = t2;
              }
            }
          } catch (e) {}

          card.appendChild(h3);
          card.appendChild(p);
          card.appendChild(a);
          listEl.appendChild(card);
        }
      } catch (err) {
        statusEl.textContent = "–ü–æ–º–∏–ª–∫–∞ GitHub API: " + err.message;
      }
    }

    function extractTitle(html) {
      const m = html.match(/<title[^>]*>([\s\S]*?)<\/title>/i);
      return m ? m[1].trim() : null;
    }
    function extractH1(html) {
      const m = html.match(/<h1[^>]*>([\s\S]*?)<\/h1>/i);
      return m ? m[1].replace(/<[^>]+>/g, "").trim() : null;
    }

    document.addEventListener("DOMContentLoaded", fetchFiles);
  </script>
</body>
</html>